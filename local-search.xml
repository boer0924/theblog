<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Openconnect VPN</title>
    <link href="/2020/05/10/oc-vpn-connect/"/>
    <url>/2020/05/10/oc-vpn-connect/</url>
    
    <content type="html"><![CDATA[<p>2020年是不平凡的一年<br>新冠肺炎疫情<br>科比逝世<br>……</p><p>疫情影响下各个公司启动远程办公，VPN成了必不可少的服务。<br>Openconnect server (ocserv) is an SSL VPN server for administrators who require elaborate user management and control. Openconnect server provides user management interfaces and back-ends necessary in enterprise environments, as well as security features, such as isolation of connected clients, features currently not available to any existing VPN servers.</p><a id="more"></a><div class="hljs"><pre><code class="hljs gml">https:<span class="hljs-comment">//copr.fedorainfracloud.org/coprs/dwmw2/openconnect/</span>yum install openconnectopenconnect --user=boer -b <span class="hljs-symbol">x</span>.<span class="hljs-symbol">x</span>.<span class="hljs-symbol">x</span>.<span class="hljs-symbol">x</span>:xyz</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>boer</tag>
      
      <tag>DevOps</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Kubeadm部署HA Kubernetes集群</title>
    <link href="/2019/09/24/k8s-ha-deployment/"/>
    <url>/2019/09/24/k8s-ha-deployment/</url>
    
    <content type="html"><![CDATA[<p><a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener">https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/</a></p><p>system requirement<br>2C2G</p><a id="more"></a><h1 id="安装Aliyun-YUM-Repo"><a href="#安装Aliyun-YUM-Repo" class="headerlink" title="安装Aliyun YUM Repo"></a>安装Aliyun YUM Repo</h1><h2 id="https-developer-aliyun-com-mirror"><a href="#https-developer-aliyun-com-mirror" class="headerlink" title="https://developer.aliyun.com/mirror/"></a><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener">https://developer.aliyun.com/mirror/</a></h2><h3 id="base"><a href="#base" class="headerlink" title="base"></a>base</h3><p>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br>curl -o /etc/yum.repos.d/CentOS-Base.repo <a href="https://mirrors.aliyun.com/repo/Centos-7.repo" target="_blank" rel="noopener">https://mirrors.aliyun.com/repo/Centos-7.repo</a></p><h3 id="epel"><a href="#epel" class="headerlink" title="epel"></a>epel</h3><p>mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup<br>mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup<br>wget -O /etc/yum.repos.d/epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/epel-7.repo</a></p><h3 id="https-github-com-opsnull-follow-me-install-kubernetes-cluster-blob-master-01-E5-88-9D-E5-A7-8B-E5-8C-96-E7-B3-BB-E7-BB-9F-E5-92-8C-E5-85-A8-E5-B1-80-E5-8F-98-E9-87-8F-md"><a href="#https-github-com-opsnull-follow-me-install-kubernetes-cluster-blob-master-01-E5-88-9D-E5-A7-8B-E5-8C-96-E7-B3-BB-E7-BB-9F-E5-92-8C-E5-85-A8-E5-B1-80-E5-8F-98-E9-87-8F-md" class="headerlink" title="https://github.com/opsnull/follow-me-install-kubernetes-cluster/blob/master/01.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B3%BB%E7%BB%9F%E5%92%8C%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F.md"></a><a href="https://github.com/opsnull/follow-me-install-kubernetes-cluster/blob/master/01.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B3%BB%E7%BB%9F%E5%92%8C%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F.md" target="_blank" rel="noopener">https://github.com/opsnull/follow-me-install-kubernetes-cluster/blob/master/01.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B3%BB%E7%BB%9F%E5%92%8C%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F.md</a></h3><h1 id="安装必需软件"><a href="#安装必需软件" class="headerlink" title="安装必需软件"></a>安装必需软件</h1><p>yum install -y chrony conntrack ipvsadm ipset jq iptables curl sysstat libseccomp wget socat git</p><h1 id="优化内核参数"><a href="#优化内核参数" class="headerlink" title="优化内核参数"></a>优化内核参数</h1><div class="hljs"><pre><code class="hljs bash">cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-iptables=1net.bridge.bridge-nf-call-ip6tables=1net.ipv4.ip_forward=1net.ipv4.tcp_tw_recycle=0net.ipv4.tcp_tw_reuse=1net.ipv4.tcp_timestamps=1net.ipv4.neigh.default.gc_thresh1=1024net.ipv4.neigh.default.gc_thresh2=2048net.ipv4.neigh.default.gc_thresh3=4096vm.swappiness=0vm.overcommit_memory=1vm.panic_on_oom=0vm.max_map_count = 262144fs.inotify.max_user_instances=8192fs.inotify.max_user_watches=1048576fs.file-max=52706963fs.nr_open=52706963net.ipv6.conf.all.disable_ipv6=1net.netfilter.nf_conntrack_max=2310720EOFsysctl --system</code></pre></div><h1 id="加载内核模块"><a href="#加载内核模块" class="headerlink" title="加载内核模块"></a>加载内核模块</h1><h2 id="https-github-com-kubernetes-kubernetes-blob-master-pkg-proxy-ipvs-README-md"><a href="#https-github-com-kubernetes-kubernetes-blob-master-pkg-proxy-ipvs-README-md" class="headerlink" title="https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/ipvs/README.md"></a><a href="https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/ipvs/README.md" target="_blank" rel="noopener">https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/ipvs/README.md</a></h2><div class="hljs"><pre><code class="hljs bash">vim /etc/sysconfig/modules/ipvs.modules<span class="hljs-meta">#!/bin/bash</span>modprobe -- ip_vsmodprobe -- ip_vs_rrmodprobe -- ip_vs_wrrmodprobe -- ip_vs_shmodprobe -- nf_conntrack_ipv4</code></pre></div><p>modprobe br_netfilter</p><h1 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h1><p>setenforce 0<br>sed -i ‘s/^SELINUX=.*/SELINUX=disabled/‘ /etc/selinux/config</p><h1 id="关闭-swap-分区"><a href="#关闭-swap-分区" class="headerlink" title="关闭 swap 分区"></a>关闭 swap 分区</h1><div class="hljs"><pre><code class="hljs bash">swapoff -ased -i <span class="hljs-string">'/ swap / s/^\(.*\)$/#\1/g'</span> /etc/fstab</code></pre></div><h1 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h1><h2 id="设置iptables默认转发策略"><a href="#设置iptables默认转发策略" class="headerlink" title="设置iptables默认转发策略"></a>设置iptables默认转发策略</h2><div class="hljs"><pre><code class="hljs bash">systemctl stop firewalldsystemctl <span class="hljs-built_in">disable</span> firewalldiptables -F &amp;&amp; iptables -X &amp;&amp; iptables -F -t nat &amp;&amp; iptables -X -t natiptables -P FORWARD ACCEPT</code></pre></div><h1 id="关闭无用服务"><a href="#关闭无用服务" class="headerlink" title="关闭无用服务"></a>关闭无用服务</h1><p><code>systemctl stop postfix &amp;&amp; systemctl disable postfix</code></p><h1 id="安装Aliyun-YUM-Repo-1"><a href="#安装Aliyun-YUM-Repo-1" class="headerlink" title="安装Aliyun YUM Repo"></a>安装Aliyun YUM Repo</h1><h2 id="https-developer-aliyun-com-mirror-1"><a href="#https-developer-aliyun-com-mirror-1" class="headerlink" title="https://developer.aliyun.com/mirror/"></a><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener">https://developer.aliyun.com/mirror/</a></h2><h3 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h3><div class="hljs"><pre><code class="hljs bash">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/enabled=1gpgcheck=1repo_gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF</code></pre></div><h1 id="安装kube-amp-docker"><a href="#安装kube-amp-docker" class="headerlink" title="安装kube* &amp; docker"></a>安装kube* &amp; docker</h1><div class="hljs"><pre><code class="hljs bash">yum install -y kubelet kubeadm kubectl <span class="hljs-comment"># 注意版本需要和镜像版本对应</span>systemctl <span class="hljs-built_in">enable</span> kubelet &amp;&amp; systemctl start kubeletyum install -y yum-utils device-mapper-persistent-data lvm2yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span class="hljs-comment"># https://docs.docker.com/engine/install/centos/</span>yum remove docker \                  docker-client \                  docker-client-latest \                  docker-common \                  docker-latest \                  docker-latest-logrotate \                  docker-logrotate \                  docker-engineyum update -y &amp;&amp; yum install -y \  containerd.io-1.2.13 \  docker-ce-19.03.8 \  docker-ce-cli-19.03.8mkdir /etc/docker<span class="hljs-comment"># 镜像加速  https://cr.console.aliyun.com/cn-beijing/instances/mirrors</span>cat &gt; /etc/docker/daemon.json &lt;&lt;EOF&#123;  <span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"https://890une7x.mirror.aliyuncs.com"</span>],  <span class="hljs-string">"exec-opts"</span>: [<span class="hljs-string">"native.cgroupdriver=systemd"</span>],  <span class="hljs-string">"log-driver"</span>: <span class="hljs-string">"json-file"</span>,  <span class="hljs-string">"log-opts"</span>: &#123;    <span class="hljs-string">"max-size"</span>: <span class="hljs-string">"100m"</span>  &#125;,  <span class="hljs-string">"storage-driver"</span>: <span class="hljs-string">"overlay2"</span>,  <span class="hljs-string">"storage-opts"</span>: [    <span class="hljs-string">"overlay2.override_kernel_check=true"</span>  ]&#125;EOFmkdir -p /etc/systemd/system/docker.service.dsystemctl start docker.servicesystemctl <span class="hljs-built_in">enable</span> docker.servicesystemctl status docker.service</code></pre></div><h3 id="kubectl-autocompletion"><a href="#kubectl-autocompletion" class="headerlink" title="kubectl autocompletion"></a>kubectl autocompletion</h3><p><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion" target="_blank" rel="noopener">https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion</a></p><h3 id="kubeadm-config"><a href="#kubeadm-config" class="headerlink" title="kubeadm config"></a>kubeadm config</h3><p>vim kubeadm-config.yaml</p><div class="hljs"><pre><code class="hljs yaml"><span class="hljs-comment"># kubeadm init --config kubeadm-config.yaml --upload-certs</span><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeadm.k8s.io/v1beta2</span><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterConfiguration</span><span class="hljs-attr">kubernetesVersion:</span> <span class="hljs-string">v1.18.3</span><span class="hljs-attr">controlPlaneEndpoint:</span> <span class="hljs-string">&lt;your-lb-ip&gt;:&lt;port&gt;</span><span class="hljs-comment"># apiServer:</span><span class="hljs-comment">#   extraArgs:</span><span class="hljs-comment">#     anonymous-auth: "false"</span><span class="hljs-comment"># controllerManager:</span><span class="hljs-comment">#   extraArgs:</span><span class="hljs-comment">#     bind-address: 0.0.0.0</span><span class="hljs-comment"># scheduler:</span><span class="hljs-comment">#   extraArgs:</span><span class="hljs-comment">#     address: 0.0.0.0</span><span class="hljs-attr">imageRepository:</span> <span class="hljs-string">registry.aliyuncs.com/google_containers</span><span class="hljs-attr">networking:</span>  <span class="hljs-attr">dnsDomain:</span> <span class="hljs-string">cluster.local</span>  <span class="hljs-attr">podSubnet:</span> <span class="hljs-number">172.30</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/16</span>  <span class="hljs-attr">serviceSubnet:</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/12</span><span class="hljs-attr">dns:</span>  <span class="hljs-attr">type:</span> <span class="hljs-string">CoreDNS</span><span class="hljs-meta">---</span><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeproxy.config.k8s.io/v1alpha1</span><span class="hljs-attr">kind:</span> <span class="hljs-string">KubeProxyConfiguration</span><span class="hljs-attr">mode:</span> <span class="hljs-string">ipvs</span></code></pre></div><h3 id="kubeadm-deploy"><a href="#kubeadm-deploy" class="headerlink" title="kubeadm deploy"></a>kubeadm deploy</h3><div class="hljs"><pre><code class="hljs bash">kubeadm init --config kubeadm-config.yaml --upload-certskubectl apply -f calico.yaml <span class="hljs-comment"># 更改192.168.1.1为podSubnet: 172.30.0.0/16</span><span class="hljs-comment"># core-dns pod不再pending</span>kubeadm resetkubectl delete node &lt;node-name&gt;</code></pre></div><h3 id="ipvs重建"><a href="#ipvs重建" class="headerlink" title="ipvs重建"></a>ipvs重建</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment"># 如果安装时为iptables模式</span>kubectl -n kube-system edit cm kube-proxy<span class="hljs-comment"># mode: "ipvs"</span>kubectl get pod -n kube-system | grep kube-proxy | awk <span class="hljs-string">'&#123;system("kubectl delete pod "$1" -n kube-system")&#125;'</span> <span class="hljs-comment"># 重建kube-proxy的pod</span></code></pre></div><h3 id="Calico-BGP模式重建"><a href="#Calico-BGP模式重建" class="headerlink" title="Calico BGP模式重建"></a>Calico BGP模式重建</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment"># TODO</span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kubernetes</tag>
      
      <tag>Calico</tag>
      
      <tag>IPVS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>APM - Pinpoint笔记</title>
    <link href="/2019/05/09/pinpoint-deployment/"/>
    <url>/2019/05/09/pinpoint-deployment/</url>
    
    <content type="html"><![CDATA[<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><ul><li><a href="https://naver.github.io/pinpoint/installation.html" target="_blank" rel="noopener">https://naver.github.io/pinpoint/installation.html</a></li><li><a href="https://naver.github.io/pinpoint/faq.html" target="_blank" rel="noopener">https://naver.github.io/pinpoint/faq.html</a></li></ul><a id="more"></a><h3 id="组件说明"><a href="#组件说明" class="headerlink" title="组件说明"></a>组件说明</h3><table><thead><tr><th><strong>HBase</strong></th><th>for storage</th></tr></thead><tbody><tr><td><strong>Pinpoint Collector</strong></td><td>Pinpoint core</td></tr><tr><td><strong>Pinpoint Web</strong></td><td>Web UI</td></tr><tr><td><strong>Pinpoint Agent</strong></td><td>attached to a java application for profiling</td></tr></tbody></table><h3 id="hbase脚本"><a href="#hbase脚本" class="headerlink" title="hbase脚本"></a>hbase脚本</h3><div class="hljs"><pre><code class="hljs bash">https://github.com/naver/pinpoint/tree/master/hbase/scripts</code></pre></div><h3 id="War包部署方式"><a href="#War包部署方式" class="headerlink" title="War包部署方式"></a>War包部署方式</h3><div class="hljs"><pre><code class="hljs bash">curl -LO https://archive.apache.org/dist/hbase/1.2.7/hbase-1.2.7-bin.tar.gz下载pinpoint组件war/jar包https://github.com/naver/pinpoint/releaseshttps://raw.githubusercontent.com/naver/pinpoint/master/hbase/scripts/hbase-create.hbasebin/hbase shell ./hbase-create.hbase</code></pre></div><h3 id="Docker部署方式"><a href="#Docker部署方式" class="headerlink" title="Docker部署方式"></a>Docker部署方式</h3><div class="hljs"><pre><code class="hljs bash">https://github.com/naver/pinpoint-dockerdocker-compose pulldocker-compose up -ddocker-compose ps</code></pre></div><h3 id="Agent配置"><a href="#Agent配置" class="headerlink" title="Agent配置"></a>Agent配置</h3><div class="hljs"><pre><code class="hljs bash">https://github.com/naver/pinpoint/blob/master/doc/installation.md<span class="hljs-comment">#profiles-2</span>vim <span class="hljs-variable">$Agent_Home</span>/pinpoint.configpinpoint.profiler.profiles.active=release<span class="hljs-comment"># 替换全部127.0.0.1为你自己的pinpoint server地址</span>vim profiles/release/pinpoint-env.config <span class="hljs-comment"># release对应上面配置文件pinpoint.profiler.profiles.active=release</span><span class="hljs-comment"># 替换全部127.0.0.1为你自己的pinpoint server地址</span>profiler.sampling.rate=&lt;your-want&gt; <span class="hljs-comment"># agent采样频率</span></code></pre></div><h3 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h3><div class="hljs"><pre><code class="hljs bash">-javaagent:<span class="hljs-variable">$&#123;pinpointPath&#125;</span>/pinpoint-bootstrap-2.0.2.jar-Dpinpoint.applicationName=&lt; 应用名, length&lt;24 &gt;-Dpinpoint.agentId=&lt; 全局唯一, length&lt;24 &gt;</code></pre></div><h3 id="填坑"><a href="#填坑" class="headerlink" title="填坑"></a>填坑</h3><ul><li>服务名 &amp; AgentID长度不能超过24 <code>https://github.com/naver/pinpoint/issues/3504</code></li><li>AgentID全局唯一</li></ul><h3 id="删除AgentID-APP"><a href="#删除AgentID-APP" class="headerlink" title="删除AgentID/APP"></a>删除AgentID/APP</h3><div class="hljs"><pre><code class="hljs bash">https://naver.github.io/pinpoint/faq.html<span class="hljs-comment">#how-do-i-delete-application-name-andor-agent-id-from-hbase</span></code></pre></div><h3 id="修改HBase数据保存时间"><a href="#修改HBase数据保存时间" class="headerlink" title="修改HBase数据保存时间"></a>修改HBase数据保存时间</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment"># Shortening the TTL values, especially for `AgentStatV2` and `TraceV2`</span>describe <span class="hljs-string">'TraceV2'</span><span class="hljs-built_in">disable</span> <span class="hljs-string">'TraceV2'</span>alter <span class="hljs-string">'TraceV2'</span>, &#123;NAME =&gt; <span class="hljs-string">'S'</span>, TTL =&gt; <span class="hljs-string">'604800'</span>&#125; <span class="hljs-comment"># 7days</span><span class="hljs-built_in">enable</span> <span class="hljs-string">'TraceV2'</span>describe <span class="hljs-string">'TraceV2'</span><span class="hljs-comment"># 业务低峰期major_compact</span>hbase shell &lt; https://github.com/naver/pinpoint/blob/master/hbase/scripts/hbase-major-compact-htable.hbase</code></pre></div><hr><p>Stay Hungry, Stay Foolish.</p>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>APM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java分析工具</title>
    <link href="/2018/06/24/jdk-analyze-tools/"/>
    <url>/2018/06/24/jdk-analyze-tools/</url>
    
    <content type="html"><![CDATA[<ol><li>jps:查看本机的Java中进程信息。</li><li>jstack:打印线程的栈信息,制作线程Dump。</li><li>jmap:打印内存映射,制作堆Dump。</li><li>jstat:性能监控工具。</li><li>jhat:内存分析工具。</li><li>jconsole:简易的可视化控制台。</li><li>jvisualvm:功能强大的控制台。</li></ol><a id="more"></a><div class="hljs"><pre><code class="hljs bash">jps -ltop -Hp 14583<span class="hljs-built_in">printf</span> <span class="hljs-string">"%x\n"</span> 14619391b391a39193918su - meisappjstack pid | egrep -A50 391[ab89]jstat -gcutil 14583 2000 10jmap -dump:format=b,file=heapDump.hprof 14583jhat heapDump.hprof-XX:+HeapDumpOnOutOfMemoryError</code></pre></div><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://www.hollischuang.com/archives/308" target="_blank" rel="noopener">https://www.hollischuang.com/archives/308</a></p>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JDK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>主机初始化的那些事儿</title>
    <link href="/2018/03/24/srv_initialize/"/>
    <url>/2018/03/24/srv_initialize/</url>
    
    <content type="html"><![CDATA[<p>集群中加入一个主机后，需要做的那些事儿</p><a id="more"></a><h3 id="磁盘挂载"><a href="#磁盘挂载" class="headerlink" title="磁盘挂载"></a>磁盘挂载</h3><div class="hljs"><pre><code class="hljs bash">parted /dev/vdb mklabel gpt mkpart 1 xfs 1 100%mkfs.xfs /dev/vdb1mkdir /new_disk<span class="hljs-built_in">echo</span> <span class="hljs-string">"UUID=`blkid /dev/vdb1 | awk -F'"</span><span class="hljs-string">' '</span>&#123;<span class="hljs-built_in">print</span> <span class="hljs-variable">$2</span>&#125;<span class="hljs-string">'` /new_disk xfs defaults 1 1" &gt;&gt; /etc/fstab</span><span class="hljs-string">mount -a</span><span class="hljs-string">df -h</span></code></pre></div><h3 id="内核优化"><a href="#内核优化" class="headerlink" title="内核优化"></a>内核优化</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment"># 内核参数优化</span>vim /etc/sysctl.confnet.ipv4.tcp_syncookies = 1net.ipv4.tcp_timestamps = 1net.ipv4.tcp_fin_timeout = 10net.ipv4.tcp_tw_recycle = 0net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_max_tw_buckets = 8000<span class="hljs-comment"># fs.file-max = 102400000</span>vm.max_map_count = 262144vm.swappiness = 10sysctl –p  <span class="hljs-comment"># 配置生效</span><span class="hljs-comment"># 文件描述符限制</span>vim /etc/security/limits.conf* soft nofile 102400* hard nofile 204800<span class="hljs-built_in">ulimit</span> -Sn<span class="hljs-built_in">ulimit</span> -Hn</code></pre></div><h3 id="监控、日志Agent"><a href="#监控、日志Agent" class="headerlink" title="监控、日志Agent"></a>监控、日志Agent</h3><ul><li>filebeat</li><li>zabbix/node_exporter</li></ul>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>parted</tag>
      
      <tag>kernel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>各种镜像源加速</title>
    <link href="/2018/02/16/mirror-speed/"/>
    <url>/2018/02/16/mirror-speed/</url>
    
    <content type="html"><![CDATA[<h3 id="阿里云镜像站"><a href="#阿里云镜像站" class="headerlink" title="阿里云镜像站"></a>阿里云镜像站</h3><p><code>https://developer.aliyun.com/mirror/</code></p><h3 id="python-pip源"><a href="#python-pip源" class="headerlink" title="python pip源"></a>python pip源</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment">## https://pip.pypa.io/en/stable/user_guide/#config-file</span><span class="hljs-comment"># 全局生效</span><span class="hljs-comment"># Like-Unix(Linux)</span>vim /etc/pip.conf<span class="hljs-comment"># macOS</span>vim /Library/Application Support/pip/pip.conf<span class="hljs-comment"># Windows</span>notepad C:\ProgramData\pip\pip.ini<span class="hljs-comment"># https://developer.aliyun.com/mirror/pypi</span><span class="hljs-comment">## 阿里云源</span>[global]index-url = https://mirrors.aliyun.com/pypi/simple/[install]trusted-host=mirrors.aliyun.com</code></pre></div><h3 id="Go-proxy"><a href="#Go-proxy" class="headerlink" title="Go proxy"></a>Go proxy</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-comment">## Go 1.13 及以上（推荐）</span>go env -w GO111MODULE=ongo env -w GOPROXY=https://goproxy.cn,direct<span class="hljs-comment"># go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct/</span></code></pre></div><h3 id="NodeJS-npm源"><a href="#NodeJS-npm源" class="headerlink" title="NodeJS npm源"></a>NodeJS npm源</h3><div class="hljs"><pre><code class="hljs bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org<span class="hljs-comment">### </span>npm config <span class="hljs-built_in">set</span> &lt;key&gt; &lt;value&gt;npm config get [&lt;key&gt;]npm config delete &lt;key&gt;npm config list [--json]npm config editnpm <span class="hljs-built_in">set</span> &lt;key&gt; &lt;value&gt;npm get [&lt;key&gt;]</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>DevOps</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pip</tag>
      
      <tag>goproxy</tag>
      
      <tag>npm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>致我的2012</title>
    <link href="/2012/12/31/for-my2012/"/>
    <url>/2012/12/31/for-my2012/</url>
    
    <content type="html"><![CDATA[<p>那些回顾2012，展望2013的话，留给席主习，理总李去说吧！</p><p>开始，应该是从2月11日开始的，有火车票为证；<br>学生生涯的真正结束，应该是在2月27日，有汽车票为证；<br>职员生涯的艰难开始，应该是在3月16日，有工资条为证；<br>结束，2012的结束，毋庸置疑的今天，时间为证。</p><a id="more"></a><p>开始的第一站，当然还是学校。<br>呼吸寝室的各种“味道”；<br>办理学校的各种手续；<br>依恋基友的各种难舍；<br> 享受学校最后的温暖。</p><p>找工作的那段时间是最艰难的。<br>起初是和很多人住很廉价的旅馆，不大的床竟然能睡3个男人。<br>在所难免的被老板发现，……也就当然，时日不多。<br>找了个“难民营”，不夸张的说，拉登当初如果逃那儿，<br>也不至于被爆头—-一个被拆迁的只剩下一栋房子矗在那里，<br>墙上到处写着“谁要拆我房，我就………………”很显然“钉子户”。<br>还好有水、有点、有老鼠。<br>初春三月，重庆的天气还是有那么一点小冷，晚上冷的蜷成一团的时候，<br> 老鼠们还出来幸灾乐祸。</p><p>找工作难，找好工作更难。<br>要你的，你不想去；想去的，人不要你。<br>好不容易找个我想去，人家也要我的，第一天上班就被外派到区县（黔江：一个三面环山，倍儿压抑的区），一待就是四十多天。<br>由于刚开始经验的匮乏，使得工作压力很大。<br>不过还好的是吃遍了黔江各地特色风味，足迹踏遍了黔江的各个乡镇（有些地方一辈子可能就去一次）。</p><p>最后的工作性质“你要明白你的身份，就一打杂的”，本少怎能忍受你这般羞辱，毅然决然的离开，至从事现在的工作。</p><p>（……因当下工作尚未结束，所以，不加以任何评述，以待后续……）</p><p>从5月10日起，住进这里，认识的男男女女，老老少少，各个行业之人，都将成为鄙人毕生之财富。吾曾有言“日租公寓，<br> 一抹江湖情”实乃贴切之至也！江湖之快乐，岂非尔等世外之人真知耳？快哉！乐哉！</p><p>2012后半载的快乐是以数月之积苦为付出的，就像IMBA成就“狗急跳墙”，亦如佛家之言“苦尽甘来”。</p><p>2012，我22，真是好2好2，哈哈哈哈！！！！！！</p>]]></content>
    
    
    <categories>
      
      <category>Life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>2012</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>写给那些女生</title>
    <link href="/2012/06/14/for-the-girl/"/>
    <url>/2012/06/14/for-the-girl/</url>
    
    <content type="html"><![CDATA[<p>人，总是在快乐的时候<br>忘记时间<br>不知道是哪一天，她们来了<br>不知不觉的走进了我平淡无奇的生活</p><a id="more"></a><p>作为一个计算机专业科班出身的我<br>对SOHO网络还是小有手段的<br>于是，与她们成功的搭讪<br>此后，本为路人甲与乙的我们<br>便“一发不可收拾”</p><p>……<br>聊天<br>……<br>吃饭<br>……<br>打球<br>……<br>等等等等</p><p>今天，她们走了<br>像她们一如既往的来<br>只是，带走的……？？？<br>太多太多……</p><p>十天，<br>十天的时间太长<br>长到足以让你厌恶一个人<br>十天的时间太短<br>短到让你无法了解真实的彼此</p><p>还有，<br>这段时间我真的很快乐<br>我会<br>把这段时间放在我记忆<br>最深处的</p><hr><p>由于感冒，思絮飘零，草草写下此数言，一来作为对几位姑娘的留恋，二来记录下这段快乐的时光，仅此而已。<br> ———2012.6.14于办公室</p>]]></content>
    
    
    <categories>
      
      <category>Life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>2012</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大学，梦起航</title>
    <link href="/2012/05/26/the-university-the-dream/"/>
    <url>/2012/05/26/the-university-the-dream/</url>
    
    <content type="html"><![CDATA[<h3 id="写在最前面"><a href="#写在最前面" class="headerlink" title="写在最前面"></a>写在最前面</h3><p>开头。这是真正的开头。写什么？怎么写？第一章，第一自然段，第一句话，第一个字，一切都是神圣的，似乎是一个生死存亡的</p><p>问题而令人难以选择，令人战战兢兢。</p><a id="more"></a><p>……</p><p>现在，平静地坐下来。</p><p>于是，顺利地开始了。</p><p>———路遥《早晨从中午开始》</p><p>一九七五年二、三月间，一个平平常常的日子，细蒙蒙的雨丝夹着一星半点的雪花，正纷纷淋淋地向大地飘洒着。时令已快到惊蛰</p><p>，雪当然再不会存留，往往还没等落地，就已经消失得无踪无影了。黄土高原严寒而漫长的冬天看来就要过去，但那真正温暖的春</p><p>天还远远地没有到来。</p><p>———路遥《平凡的世界》</p><h3 id="2334"><a href="#2334" class="headerlink" title="2334"></a>2334</h3><p>我不知道它为什么会顺序排列<br>也不知道它为什么会中间重复<br>总之</p><p>我牢牢的记住了这个数字———一列绿皮车的车次</p><p>那是我第一次坐火车</p><p>那是我第一次离家那么远</p><p>那是我第一次上大学</p><h3 id="20080915"><a href="#20080915" class="headerlink" title="20080915"></a>20080915</h3><p>不知道什么原因<br>我对这个时间记忆犹为清晰<br>所以<br>也就将它定义为大学开始的时间<br>其实<br>实际时间应该是要早于这个时间<br> 但，好像又忘却了</p><h3 id="608"><a href="#608" class="headerlink" title="608"></a>608</h3><p>一个多么好的数字<br>0 . 开始<br>6 . 顺利<br>8 . 发展</p><p>这是我大学第一间寝室号码<br>在那拥挤的空间里<br> 我开始慢慢习惯9分月重庆那特有的潮热的天气</p><h3 id="军训"><a href="#军训" class="headerlink" title="军训"></a>军训</h3><p>大学，第一堂课“军训”</p><p>大家都有同样的装扮<br>同样的狼狈———汗流浃背<br>分不出美女与帅哥<br>所以<br>你想提前下手似乎是不可能的</p><p>然而，对于第一堂课，我是很惭愧的，出于某种原因，没有参加。<br>但是，军训场地的氛围还是感受过的。</p><h3 id="大一"><a href="#大一" class="headerlink" title="大一"></a>大一</h3><p>还算乖巧的我们还算听话，每次上课宽敞的教室多少有点燥热。<br> 至于课程嘛！也就那不痛不痒的《近现代史纲要》、《马哲》等等之类的。</p><p>那会儿寝室的电脑寥寥无几。<br>所以，活动时间还是有的。<br>社团、协会，偶尔上个课，开个会什么的，还是挺看重的。<br> 至于，后来嘛！呵呵……</p><p>那一年，是最难熬的。<br>语言，饮食，环境，甚至文化。<br> 都需要去习惯。</p><p>那时的寝室站在阳台上就能看到高速公路。每次看到呼啸而过的大巴，一种家的思念，油然而生，涌上心头，久久不能平复。</p><p>那一年，我很傻。</p><h3 id="大二"><a href="#大二" class="headerlink" title="大二"></a>大二</h3><p>我们聚集了一帮子“死党”，有个伟大的代号“306”。</p><p>最安逸的时光是在熄灯之后的半把个小时里。</p><p>我们最高尚的话题是“谈谈中国近五十年的发展”；<br> 最低俗的话题是“关于辣椒皮皮的种种”；</p><p>最MAN的话题是“游历金庸武侠的画卷”；<br> 最八卦的话题是“仓老师、凤姐之流的”。</p><p>那一年<br> 我微弱的尝试了一下“爱情”的味道，苦涩与美好交织；</p><p>那一年<br>我们换了辅导员。那天，我写道“多好的阳光！突然，换辅导员了。（晴天霹雳） 期待吧！…”；</p><p>那一年<br>我参加了计算机技术与软件专业技术资格(水平)考试———网络工程师（中级）考试。没过，差得很远……</p><p>那一年，很复杂。</p><h3 id="大三"><a href="#大三" class="headerlink" title="大三"></a>大三</h3><p>有了那样一群“死党”的陪伴，时间恍惚，都似乎忘记了大三是怎么开始的。<br>噢！对了，我们的代号换了“209”，这可以促使一下记忆。</p><p>我们继续保持着大二的优良作风，睡前探讨半小时。</p><p>紧要的不紧要的，<br>有关的无关的，<br>天上的人家的，<br>过去的将来的。</p><p>那一年<br>我们有一个神奇的老师“从A到Z，二十四个英文字母中……”<br>我百思不得其解。敢问老师，那两个字母是S和B吗？</p><p>那一年<br>我又一次参加了计算机技术与软件专业技术资格(水平)考试———网络工程师（中级）考试。<br>不出意料的通过还是让我HI了那么一阵子的。</p><p>就这样沉浸在胜利的快乐中，度过了那一年。</p><p>那一年，很快乐。</p><h3 id="大四"><a href="#大四" class="headerlink" title="大四"></a>大四</h3><p>由于某种原因<br>我差点脱离了我的组织“124”<br>不过<br>经过殊死的挣扎，我还是以“无尚的崇高”回归了组织。<br> 再次的“回归”让我的压力更大，更加迷茫。</p><p>那时间也是最宅的，一日“两餐”几乎都是由“基友”代劳的。<br>DOTA，DOTA，依然DOTA。<br> 似乎，也只有在游戏的厮杀中得以解脱，实现忘我。</p><p>然而，也不是什么都没做。<br> 但是，现在看来，当时的想法、做法都是那么盲目。</p><p>那一年，很短暂。</p><p>那一年，很迷茫。</p><h3 id="本初"><a href="#本初" class="headerlink" title="本初"></a>本初</h3><p>大学目标有四“毕业证，职业资格认证，英语，女友”。<br> 大学时日已尽，目标对半实现，实感惭愧。</p><p>如此的只言片语只能是记忆的片段。</p><p>有此想法，已有许久。<br>今日，<br>突发感想，迫不及待，写下此篇，以励日后。</p><p>———— 2012年5月26日于重庆·歇台子</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>“这第一碗酒，朕要敬给太皇太后孝庄，敬给列祖列宗的在天之灵。朕八岁丧父，九岁丧母，是孝庄太后带着朕，冲破千难险阻，</p><p>才有今天的大清盛世!孝庄太后，朕想你啊。”</p><p>“还有这第二碗酒，朕要敬给列位臣工，敬给天下子民，敬给今天赴宴的 老同年们!六十年来，是你们辅佐朕，保国平安，你们俯</p><p>首农桑，致使大清的百业兴旺。君、臣、民，三者同德呀！没有你们，记着便没有今日的大清。朕在这儿谢谢你们了。”</p><p>“这第三碗酒啊，朕要敬给朕的死敌们。鳌拜，吴三桂，嘿！郑经，噶尔丹，噢，还有那个朱三太子。他们都是英雄豪杰啊，他们</p><p>造就了朕!他们逼着朕立下了这丰功伟业。朕恨他们，也敬他们。可惜呀，他们都死了，朕寂莫啊!……朕不祝他们死的安宁，祝</p><p>他们，来生再世再与朕为敌吧！”</p><p>———二月河《康熙王朝》</p>]]></content>
    
    
    <categories>
      
      <category>Life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>2012</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
